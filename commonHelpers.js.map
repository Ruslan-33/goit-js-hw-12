{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Логікa роботи додатка\n\nimport iziToast from 'izitoast';                                  // Бібліотека для повідомлень\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';                      // Бібліотека для галереї\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst inputOfWords = document.querySelector('.inputOfWords');     // Інпут\nconst buttonForInput = document.querySelector('.buttonForInput'); // Кнопка\nconst userList = document.querySelector('.userList');             // Галерея\nconst areaForLoader = document.querySelector('.areaForLoader');   // Лоадер\n\nlet wordOfUser = '';\nlet imagesLength = '';\n\nconst lightbox = new SimpleLightbox('.gallery a', {   // Великі картинки \n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nbuttonForInput.addEventListener('click', event => {   // Надсилання запиту на сервер\n  event.preventDefault();\n  loaderF();\n  userList.innerHTML = '';\n  setTimeout(() => {\n    wordOfUser = inputOfWords.value.trim();\n    checkInputValidity();\n  }, 2000);\n  // inputOfWords.value = '';\n});\n\nfunction checkInputValidity() {                   // Перевірка валідності запиту\n  fetchImages()\n    .then(images => {\n      if (wordOfUser === '') {\n        iziToast.show({\n          color: 'red',\n          message: `Sorry, the input field must be filled in to start the photo search.`,\n          position: 'topRight',\n        });\n      } else if (images.length === 0) {\n        iziToast.show({\n          color: 'red',\n          message: `Sorry, there are no images matching your search query. Please try again!`,\n          position: 'topRight',\n        });\n      } else {\n        renderImg(images);\n      }\n    })\n    .catch(error => console.log(error))\n    .finally(() => spanElementRem());\n    inputOfWords.value = '';\n}\n\nfunction renderImg(images) {                        // Рендар фото в браузері\n  imagesLength = images.length;\n\n  const markupImg = images                          \n    .map(image => {\n      return `<div class=\"blockForAllElements\">\n          <li>\n          <a href=${image.largeImageURL} download=\"false\">\n          <img src=${image.webformatURL} alt = \"${image.tags}\" class = \"imgOfUser\">\n          </a>\n          </li>\n          <div class = \"divForDescription\"> \n          <ul class=\"blockOfInfo\"> \n            <li class=\"title\">Likes</li>\n            <li class=\"info\">${image.likes}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Views</li>\n            <li class=\"info\">${image.views}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Comments</li>\n            <li class=\"info\">${image.comments}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Downloads</li>\n            <li class=\"info\">${image.downloads}</li>\n          </ul>\n          </div>\n        </div>`;\n    })\n    .join('');\n  userList.insertAdjacentHTML('beforeend', markupImg);\n\n  lightbox.refresh();\n}\n\nfunction fetchImages() {                            // Запит на сервер для отримання фото\n  return fetch(\n    `https://pixabay.com/api/?key=42977219-0f6c9f9217f976d8651793c3a&q=${wordOfUser}&image_type=photo&per_page=15&orientation=horizontal&safesearch=true`\n  )\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => data.hits);\n}\n\nfunction loaderF() {                                  // Створюємо лоадер\n  const spanElement = document.createElement('span');\n  areaForLoader.appendChild(spanElement);\n  spanElement.classList.add('loader');\n}\n\nfunction spanElementRem() {                           // Видаляємо лоадер\n  const loaderF = document.querySelector('.loader');\n  loaderF.remove();\n}"],"names":["inputOfWords","buttonForInput","userList","areaForLoader","wordOfUser","lightbox","SimpleLightbox","event","loaderF","checkInputValidity","fetchImages","images","iziToast","renderImg","error","spanElementRem","markupImg","image","response","data","spanElement"],"mappings":"6vBAQA,MAAMA,EAAe,SAAS,cAAc,eAAe,EACrDC,EAAiB,SAAS,cAAc,iBAAiB,EACzDC,EAAW,SAAS,cAAc,WAAW,EAC7CC,EAAgB,SAAS,cAAc,gBAAgB,EAE7D,IAAIC,EAAa,GAGjB,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,KAChB,CAAC,EAEDL,EAAe,iBAAiB,QAASM,GAAS,CAChDA,EAAM,eAAc,EACpBC,IACAN,EAAS,UAAY,GACrB,WAAW,IAAM,CACfE,EAAaJ,EAAa,MAAM,OAChCS,GACD,EAAE,GAAI,CAET,CAAC,EAED,SAASA,GAAqB,CAC5BC,EAAa,EACV,KAAKC,GAAU,CACVP,IAAe,GACjBQ,EAAS,KAAK,CACZ,MAAO,MACP,QAAS,sEACT,SAAU,UACpB,CAAS,EACQD,EAAO,SAAW,EAC3BC,EAAS,KAAK,CACZ,MAAO,MACP,QAAS,2EACT,SAAU,UACpB,CAAS,EAEDC,EAAUF,CAAM,CAExB,CAAK,EACA,MAAMG,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAMC,EAAc,CAAE,EAC/Bf,EAAa,MAAQ,EACzB,CAEA,SAASa,EAAUF,EAAQ,CACVA,EAAO,OAEtB,MAAMK,EAAYL,EACf,IAAIM,GACI;AAAA;AAAA,oBAEOA,EAAM,aAAa;AAAA,qBAClBA,EAAM,YAAY,WAAWA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAM7BA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,+BAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,+BAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,+BAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,eAIzC,EACA,KAAK,EAAE,EACVf,EAAS,mBAAmB,YAAac,CAAS,EAElDX,EAAS,QAAO,CAClB,CAEA,SAASK,GAAc,CACrB,OAAO,MACL,qEAAqEN,CAAU,sEAChF,EACE,KAAKc,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAQA,EAAK,IAAI,CAC3B,CAEA,SAASX,GAAU,CACjB,MAAMY,EAAc,SAAS,cAAc,MAAM,EACjDjB,EAAc,YAAYiB,CAAW,EACrCA,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEA,SAASL,GAAiB,CACR,SAAS,cAAc,SAAS,EACxC,OAAM,CAChB"}