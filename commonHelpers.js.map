{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// // Функції для HTTP-запитів\n\n// // Описаний у документації\n// import iziToast from \"izitoast\";\n// // Додатковий імпорт стилів\n// import \"izitoast/dist/css/iziToast.min.css\";\n\n\n// const API_KEY = '43104270-906b33b14dade84df1c23efb2';\n\n// const inputOfWords = document.querySelector('.inputOfWords');     // Інпут\n// const buttonForInput = document.querySelector('.buttonForInput'); // Кнопка\n\n// let wordOfUser = '';\n\n// buttonForInput.addEventListener('click', event => {   // Надсилання запиту на сервер\n//   loaderF();\n//   event.preventDefault();\n//   userList.innerHTML = '';\n//   setTimeout(() => {\n//     wordOfUser = inputOfWords.value.trim();\n//     checkInputValidity();\n//   }, 2000);\n// });\n\n// function checkInputValidity() {                   // Перевірка валідності запиту\n//   fetchImages()\n//     .then(images => {\n//       if (wordOfUser === '') {\n//         iziToast.show({\n//           color: 'red',\n//           message: `Sorry, the input field must be filled in to start the photo search.`,\n//           position: 'topCenter',\n//         });\n//       } else if (images.length === 0) {\n//         iziToast.show({\n//           color: 'red',\n//           message: `Sorry, there are no images matching your search query. Please try again!`,\n//           position: 'topCenter',\n//         });\n//       } else {\n//           renderImg(images);\n//       }\n//     })\n//     .catch(error => console.log(error))\n//     .finally(() => spanElementRem());\n// }\n\n// function fetchImages() {                            // Запит на сервер для отримання фото\n//   return fetch(\n//     `https://pixabay.com/api/?key=${API_KEY}=${wordOfUser}&image_type=photo&per_page=15&orientation=horizontal&safesearch=true`\n//   )\n//     .then(response => {\n//       if (!response.ok) {\n//         throw new Error(response.status);\n//       }\n//       return response.json();\n//     })\n//     .then(data => data.hits);\n// }\n\n// import { userList, renderImg, loaderF, spanElementRem,} from './render-functions.js';\n\n\nimport axios from \"axios\";\nexport async function getData(userValue, page = 1, perPage = 15) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const PARAMS = new URLSearchParams({\n    key: '43104270-906b33b14dade84df1c23efb2',\n    q: userValue,\n    image_type: 'photo',\n    page: page,\n    per_page: perPage,\n    orientation: 'horizontal',\n    safesearch: true,\n  })\n  const url = BASE_URL + END_POINT + '?' + PARAMS;\n  try {\n    const response = await axios.get(url);\n    if (!response.data.hits) {\n      throw new Error('Error fetching data');\n    }\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data', error);\n    throw error;\n  }\n}\n","// Функції для відображення елементів інтерфейсу\n\nimport SimpleLightbox from 'simplelightbox';                      // Бібліотека для галереї\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const userList = document.querySelector('.userList');             // Галерея\nexport const areaForLoader = document.querySelector('.areaForLoader');   // Лоадер\n\nexport const lightbox = new SimpleLightbox('.gallery a', {   // Великі картинки \n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nexport let imagesLength = '';\n\nexport function renderImg(images) {                        // Рендер фото в браузері\n  imagesLength = images.length;\n\n  const markupImg = images                          \n    .map(image => {\n      console.log(image);\n      return `<div class=\"blockForAllElements\">\n          <li>\n          <a href=${image.largeImageURL} download=\"false\">\n          <img src=${image.webformatURL} alt=\"${image.tags}\" class =\"imgOfUser\">\n          </a>\n          </li>\n          <div class = \"divForDescription\"> \n          <ul class=\"blockOfInfo\"> \n            <li class=\"title\">Likes</li>\n            <li class=\"info\">${image.likes}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Views</li>\n            <li class=\"info\">${image.views}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Comments</li>\n            <li class=\"info\">${image.comments}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Downloads</li>\n            <li class=\"info\">${image.downloads}</li>\n          </ul>\n          </div>\n        </div>`;\n    })\n    .join('');\n  userList.insertAdjacentHTML('beforeend', markupImg);\n\n  lightbox.refresh();\n}\nexport function renderMoreImg(images) {                        // Рендер фото в браузері\n  imagesLength = images.length;\n\n  const markupImg = images                          \n    .map(image => {\n      console.log(image);\n      return `<div class=\"blockForAllElements\">\n          <li>\n          <a href=${image.largeImageURL} download=\"false\">\n          <img src=${image.webformatURL} alt=\"${image.tags}\" class =\"imgOfUser\">\n          </a>\n          </li>\n          <div class = \"divForDescription\"> \n          <ul class=\"blockOfInfo\"> \n            <li class=\"title\">Likes</li>\n            <li class=\"info\">${image.likes}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Views</li>\n            <li class=\"info\">${image.views}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Comments</li>\n            <li class=\"info\">${image.comments}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Downloads</li>\n            <li class=\"info\">${image.downloads}</li>\n          </ul>\n          </div>\n        </div>`;\n    })\n    .join('');\n  userList.insertAdjacentHTML('beforeend', markupImg);\n\n  lightbox.refresh();\n}\n\nexport function loaderF() {                                  // Створюємо лоадер\n  const spanElement = document.createElement('span');\n  areaForLoader.appendChild(spanElement);\n  spanElement.classList.add('loader');\n}\n\nexport function spanElementRem() {                           // Видаляємо лоадер\n  const loaderF = document.querySelector('.loader');\n  loaderF.remove();\n}","// // // Логікa роботи додатка\n\n// // import { getData } from './js/pixabay-api';\n\n// // import iziToast from 'izitoast';                                  // Бібліотека для повідомлень\n// // import 'izitoast/dist/css/iziToast.min.css';\n\n// // import SimpleLightbox from 'simplelightbox';                      // Бібліотека для галереї\n// // import 'simplelightbox/dist/simple-lightbox.min.css';\n\n// // const inputOfWords = document.querySelector('.inputOfWords');     // Інпут\n// // const buttonForInput = document.querySelector('.buttonForInput'); // Кнопка\n// // const userList = document.querySelector('.userList');             // Галерея\n// // const areaForLoader = document.querySelector('.areaForLoader');   // Лоадер\n\n// // let wordOfUser = '';\n// // let imagesLength = '';\n\n// // const lightbox = new SimpleLightbox('.gallery a', {   // Великі картинки \n// //   captionDelay: 250,\n// //   captionsData: 'alt',\n// // });\n\n// // buttonForInput.addEventListener('click', event => {   // Надсилання запиту на сервер\n// //   event.preventDefault();\n// //   loaderF();\n// //   userList.innerHTML = '';\n// //   setTimeout(() => {\n// //     wordOfUser = inputOfWords.value.trim();\n// //     checkInputValidity();\n// //   }, 2000);\n// //   // inputOfWords.value = '';\n// // });\n\n// // function checkInputValidity() {                   // Перевірка валідності запиту\n// //   fetchImages()\n// //     .then(images => {\n// //       if (wordOfUser === '') {\n// //         iziToast.show({\n// //           color: 'red',\n// //           message: `Sorry, the input field must be filled in to start the photo search.`,\n// //           position: 'topRight',\n// //         });\n// //       } else if (images.length === 0) {\n// //         iziToast.show({\n// //           color: 'red',\n// //           message: `Sorry, there are no images matching your search query. Please try again!`,\n// //           position: 'topRight',\n// //         });\n// //       } else {\n// //         renderImg(images);\n// //       }\n// //     })\n// //     .catch(error => console.log(error))\n// //     .finally(() => spanElementRem());\n// //     inputOfWords.value = '';\n// // }\n\n// // function renderImg(images) {                        // Рендар фото в браузері\n// //   imagesLength = images.length;\n\n// //   const markupImg = images                          \n// //     .map(image => {\n// //       return `<div class=\"blockForAllElements\">\n// //           <li>\n// //           <a href=${image.largeImageURL} download=\"false\">\n// //           <img src=${image.webformatURL} alt = \"${image.tags}\" class = \"imgOfUser\">\n// //           </a>\n// //           </li>\n// //           <div class = \"divForDescription\"> \n// //           <ul class=\"blockOfInfo\"> \n// //             <li class=\"title\">Likes</li>\n// //             <li class=\"info\">${image.likes}</li>\n// //           </ul>\n// //           <ul class=\"block\">\n// //             <li class=\"title\">Views</li>\n// //             <li class=\"info\">${image.views}</li>\n// //           </ul>\n// //           <ul class=\"block\">\n// //             <li class=\"title\">Comments</li>\n// //             <li class=\"info\">${image.comments}</li>\n// //           </ul>\n// //           <ul class=\"block\">\n// //             <li class=\"title\">Downloads</li>\n// //             <li class=\"info\">${image.downloads}</li>\n// //           </ul>\n// //           </div>\n// //         </div>`;\n// //     })\n// //     .join('');\n// //   userList.insertAdjacentHTML('beforeend', markupImg);\n\n// //   lightbox.refresh();\n// // }\n\n// // function fetchImages() {                            // Запит на сервер для отримання фото\n// //   return fetch(\n// //     `https://pixabay.com/api/?key=42977219-0f6c9f9217f976d8651793c3a&q=${wordOfUser}&image_type=photo&per_page=15&orientation=horizontal&safesearch=true`\n// //   )\n// //     .then(response => {\n// //       if (!response.ok) {\n// //         throw new Error(response.status);\n// //       }\n// //       return response.json();\n// //     })\n// //     .then(data => data.hits);\n// // }\n\n// function loaderF() {                                  // Створюємо лоадер\n//   const spanElement = document.createElement('span');\n//   areaForLoader.appendChild(spanElement);\n//   spanElement.classList.add('loader');\n// }\n\n// function spanElementRem() {                           // Видаляємо лоадер\n//   const loaderF = document.querySelector('.loader');\n//   loaderF.remove();\n// }\n\n\nimport { getData } from './js/pixabay-api';\nimport { renderImg, renderMoreImg } from './js/render-functions';\n\nimport iziToast from 'izitoast';                                  // Бібліотека для повідомлень\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.formForInput');             // Форма\nconst inputOfWords = document.querySelector('.inputOfWords');     // Інпут\nconst buttonLoadMore = document.querySelector('.buttonLoadMore'); // Кнопка \"Ще\"\nconst userList = document.querySelector('.userList');             // Галерея\nconst areaForLoader = document.querySelector('.areaForLoader');   // Лоадер\n\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nform.addEventListener('submit', fetchImages)\nbuttonLoadMore.addEventListener('click', moreImages)\n\nasync function fetchImages(event) {\n  event.preventDefault();\n\n  const query = inputOfWords.value.trim();\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search images',\n    })\n    return\n  }\n  areaForLoader.style.display = 'block';\n  buttonLoadMore.style.display = 'none';\n  currentPage = 1;\n  currentQuery = query;\n\n  try {\n    const data = await getData(query, currentPage);\n    if (data.hits.length === 0) {\n      iziToast.error({\n      title: 'Error',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n    })\n    } else {\n      totalHits = data.totalHits;\n      userList.innerHTML = '';\n      renderImg(data.hits);\n      if (data.hits.length >= 15) {\n          buttonLoadMore.style.display = 'block';\n      }\n      inputOfWords.value = '';\n    }\n  } catch (error) {\n    if (userList.innerHTML = '') {\n      iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while searching for images!',\n    })\n    }\n  }\n  finally {\n    areaForLoader.style.display = 'none';\n  }\n}\n\nasync function moreImages(event) {\n  event.preventDefault();\n\n  areaForLoader.style.display = 'block';\n\n  try {\n    currentPage += 1;\n    const data = await getData(currentQuery, currentPage);\n    if (data.hits.length > 0) {\n      const cardHeight = document.querySelector('.blockForAllElements').getBoundingClientRect().height;\n      renderMoreImg(data.hits);\n      window.scrollBy({\n                top: cardHeight * 2, // Прокручуємо на дві висоти карточки галереї\n                behavior: 'smooth' // Додаємо плавність\n            });\n    } \n  } catch (error) {\n    areaForLoader.style.display = 'none';\n    iziToast.warning({\n      title: 'Warning',\n      message: 'No more images',\n    })\n  }\n  finally {\n    if (userList.querySelectorAll('.blockForAllElements').length >= totalHits) {\n      buttonLoadMore.style.display = 'none';\n      iziToast.info({\n      title: 'Info',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    })\n    }\n    areaForLoader.style.display = 'none';\n  }\n}\n"],"names":["getData","userValue","page","perPage","BASE_URL","END_POINT","PARAMS","url","response","axios","error","userList","lightbox","SimpleLightbox","renderImg","images","markupImg","image","renderMoreImg","form","inputOfWords","buttonLoadMore","areaForLoader","currentPage","currentQuery","totalHits","fetchImages","moreImages","event","query","iziToast","data","cardHeight"],"mappings":"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"}